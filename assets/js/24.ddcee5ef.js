(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{623:function(t,a,s){t.exports=s.p+"assets/img/p1.d9aa4a2a.png"},624:function(t,a,s){t.exports=s.p+"assets/img/p1.aec76349.jpg"},700:function(t,a,s){"use strict";s.r(a);var n=s(13),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"性能指标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能指标"}},[t._v("#")]),t._v(" 性能指标")]),t._v(" "),n("h2",{attrs:{id:"常规指标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常规指标"}},[t._v("#")]),t._v(" 常规指标")]),t._v(" "),n("h3",{attrs:{id:"fp-first-print-首次绘制时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fp-first-print-首次绘制时间"}},[t._v("#")]),t._v(" FP - first print ：首次绘制时间")]),t._v(" "),n("p",[t._v("首次绘制包括了任何用户自定义的背景绘制，它是将第一个像素点绘制到屏幕的时刻，\n对于应用⻚面，用户在视觉上首次出现不同于跳转之前的内容时间点，或者说是⻚面发生第一次绘制的\n时间点。")]),t._v(" "),n("h3",{attrs:{id:"fcp-first-contented-print-首次有内容绘制时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fcp-first-contented-print-首次有内容绘制时间"}},[t._v("#")]),t._v(" FCP - first contented print ：首次有内容绘制时间")]),t._v(" "),n("p",[t._v("指浏览器完成渲染 DOM 中第一个内容的时间点，可能是文本、图像、SVG或者其他任何元素，此时用\n户应该在视觉上有直观的感受。")]),t._v(" "),n("h3",{attrs:{id:"fmp-first-meaningful-print-首次有意义绘制时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fmp-first-meaningful-print-首次有意义绘制时间"}},[t._v("#")]),t._v(" FMP - first meaningful print：首次有意义绘制时间")]),t._v(" "),n("p",[t._v("指⻚面关键元素渲染时间。这个概念并没有标准化定义，因为关键元素可以由开发者自行定义——究竟\n什么是“有意义”的内容，只有开发者或者产品经理自己了解。")]),t._v(" "),n("h3",{attrs:{id:"tti-time-to-interactive-用户可交互时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tti-time-to-interactive-用户可交互时间"}},[t._v("#")]),t._v(" TTI -  Time to Interactive：用户可交互时间")]),t._v(" "),n("p",[t._v("顾名思义，也就是用户可以与应用进行交互的时间。一般来讲，我们认为是 domready 的时间，因为我\n们通常会在这时候绑定事件操作。如果⻚面中涉及交互的脚本没有下载完成，那么当然没有到达所谓的\n用户可交互时间。那么如何定义 domready 时间呢？")]),t._v(" "),n("h3",{attrs:{id:"ttfb-time-for-first-byte-网络请求耗时"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ttfb-time-for-first-byte-网络请求耗时"}},[t._v("#")]),t._v(" TTFB - time for first byte：网络请求耗时")]),t._v(" "),n("p",[t._v("TTFB是发出⻚面请求到接收到应答数据第一个字节所花费的毫秒数")]),t._v(" "),n("h3",{attrs:{id:"dcl-domcontentloaded"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dcl-domcontentloaded"}},[t._v("#")]),t._v(" DCL：DomContentLoaded")]),t._v(" "),n("h3",{attrs:{id:"l-dom-onload"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#l-dom-onload"}},[t._v("#")]),t._v(" L：DOM onload")]),t._v(" "),n("p",[n("strong",[t._v("总下载时间")])]),t._v(" "),n("p",[t._v("⻚面所有资源加载完成所需要的时间。一般可以统计 window.onload 时间，这样可以统计出同步加载的资源全部加载完的耗时。如果⻚面中存在较多异步渲染，也可以将异步渲染全部完成的时间作为总下载\n时间。")]),t._v(" "),n("p",[n("strong",[t._v("DOMContentLoaded 与 load 事件的区别")])]),t._v(" "),n("p",[t._v("DOMContentLoaded 指的是文档中 DOM 内容加载完毕的时间，也就是说 HTML 结构已经完整。但\n是我们知道，很多⻚面包含图片、特殊字体、视频、音频等其他资源，这些资源由网络请求获取，\nDOM 内容加载完毕时，由于这些资源往往需要额外的网络请求，还没有请求或者渲染完成。而当⻚面上所有资源加载完成后，load 事件才会被触发。因此，在时间线上，load 事件往往会落后于\nDOMContentLoaded 事件。")]),t._v(" "),n("p",[n("strong",[t._v("关于 DOMContentLoaded 和 domReady ？")])]),t._v(" "),n("p",[t._v("我们简单说一下，浏览器是从上到下，从左到右，一个个字符串读入，大致可以认为两个同名的开标\n签与闭标签就是一个DOM(有的是没有闭签)，这时就忽略掉它的两个标签间的内容。⻚面上有许多标\n签, 但标签会生成同样多的DOM，因为有的标签下只允许存在特定的子标签，比如tr下面一定是td,th,\nselect下面一定是opgroup,option,而option下面，就算你写了"),n("span"),t._v("，它都会忽略掉，\noption下面只存在文本，这就是我们需要自定义下拉框的缘故。"),n("br"),t._v("\n我们说过, 这顺序是从上到下, 有的元素很简单,会构建得很快,但标签存在src, href属性,它会引用外部\n资源,这就要区别对待了.比如说, script标签,它一定会等src指定的脚本文件加载下来,然后全部执行了\n里面的脚本,才会分析下一个标签.这种现象叫做堵塞.\n堵塞是一种非常致命的现象,因为浏览器渲染引擎是单线程的,如果头部脚本过多过大会导致白屏,影响\n用户体验,因此雅⻁的20军规就有一条提到 ,将所有script标签放到body之后.\n此外, style标签与link标签,它们在加载样式文件时是不会堵塞,但它们一旦异步加载好,就立即开始渲染\n已经构建好的元素节点们, 这可能会引起reflow, 这也影响速度.\n另一个影响DOM树构建的因此是iframe,它也会加载资源, 虽然不会堵塞DOM构建,但它由于是发出\nHTTP请求,而HTTP请求是有限,它会与父标签的其他需要加载外部资源的标签产生竞争。我们经常看\n到一些新闻网,上面会挂许多iframe广告, 这些⻚面一开始加载时就很卡,也是这缘故.\n此外还有object元素, 用来加载flash。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("等等，这些东⻄都会影响到DOM树的构建过程.因此在这时候,当我们贸贸然,使用getElementById,\ngetElementsByTagName获取元素,然后操作它们, 就会有很大机率碰到 元素为null的 异常. 这时, 目标元素还可以没有转换为DOM节点, 还只是一个普通的字符串呢!")]),t._v(" "),n("p",[t._v("很早期, 浏览器提供了一个window.onload方法,但这东⻄是等到所有标签变成DOM,并且外部资源,图\n片,背景音乐什么都加载好才触发, 时间上有点晚。")]),t._v(" "),n("p",[t._v("幸好,浏览器提供了一个document.readyState属性,当它变成complete时,说明这时机到了\n但这是一个属性,不是一个事件,需要使用不太精确的setInterval轮询\n在标签浏览器,")]),t._v(" "),n("h2",{attrs:{id:"chrome-最新指标-web-vitals"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#chrome-最新指标-web-vitals"}},[t._v("#")]),t._v(" chrome 最新指标 web-vitals")]),t._v(" "),n("h3",{attrs:{id:"lcp-largest-contentful-paint-good-2-5sec-middle-4-0-sec-poor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lcp-largest-contentful-paint-good-2-5sec-middle-4-0-sec-poor"}},[t._v("#")]),t._v(" LCP（Largest Contentful Paint）good - 2.5sec - middle - 4.0 sec - poor")]),t._v(" "),n("p",[t._v("衡量⻚面的加载体验，它表示视口内可⻅的最大内容元素的渲染时间。相比 FCP，这个指标可以更加真\n实地反映具体内容加载速度。比如，如果⻚面渲染前有一个 loading 动画，那么 FCP 可能会以 loading 动画出现的时间为准，而 LCP 定义了 loading 动画加载后，真实渲染出内容的时间。")]),t._v(" "),n("h3",{attrs:{id:"fid-first-input-delay-首次输入延迟-good-100ms-middle-300ms-poor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fid-first-input-delay-首次输入延迟-good-100ms-middle-300ms-poor"}},[t._v("#")]),t._v(" FID（First Input Delay）首次输入延迟 good - 100ms - middle - 300ms - poor")]),t._v(" "),n("p",[t._v("衡量可交互性，它表示用户和⻚面进行首次交互操作所花费的时间。它比 TTI（Time to Interact）更加提前，这个阶段虽然⻚面已经显示出部分内容，但并不能完全具备可交互性，对于用户的响应可能会有\n较大的延迟。")]),t._v(" "),n("h3",{attrs:{id:"cls-cumulative-layout-shift-good-0-1-middle-0-25-poor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cls-cumulative-layout-shift-good-0-1-middle-0-25-poor"}},[t._v("#")]),t._v(" CLS（Cumulative Layout Shift）good - 0.1- middle - 0.25 - poor")]),t._v(" "),n("p",[t._v("衡量视觉稳定性，表示⻚面的整个生命周期中，发生的每个意外的样式移动的所有单独布局更改得分的\n总和。所以这个分数当然越小越好。")]),t._v(" "),n("p",[t._v("对应的指标如下图所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(623),alt:"p1"}})]),t._v(" "),n("h1",{attrs:{id:"如何获取指标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何获取指标"}},[t._v("#")]),t._v(" 如何获取指标")]),t._v(" "),n("p",[n("img",{attrs:{src:s(624),alt:"p1"}})]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("性能指标名称")]),t._v(" "),n("th",[t._v("显示名称")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("unloadEventStart")]),t._v(" "),n("td",[t._v("前一页面卸载开始")])]),t._v(" "),n("tr",[n("td",[t._v("unloadEventEnd")]),t._v(" "),n("td",[t._v("前一页面卸载结束")])]),t._v(" "),n("tr",[n("td",[t._v("redirectStart")]),t._v(" "),n("td",[t._v("重定向开始时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回开始重定向的fetchStart的值。其他情况，则返回0）")])]),t._v(" "),n("tr",[n("td",[t._v("redirectEnd")]),t._v(" "),n("td",[t._v("重定向结束时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回最后一次重定向接受完数据的时间。其他情况则返回0）")])]),t._v(" "),n("tr",[n("td",[t._v("navigationStart")]),t._v(" "),n("td",[t._v("加载起始时间，如果没有前一个⻚面的unload,则与fetchStart值相等")])]),t._v(" "),n("tr",[n("td",[t._v("fetchStart")]),t._v(" "),n("td",[t._v("fetchStart 浏览器发起资源请求时，如果有缓存，则返回读取缓存的开始时间")])]),t._v(" "),n("tr",[n("td",[t._v("domainLookupStart")]),t._v(" "),n("td",[t._v("DNS域名开始查询的时间,如果有本地的缓存或keep-alive等，则返回fetchStart")])]),t._v(" "),n("tr",[n("td",[t._v("domainLookupEnd")]),t._v(" "),n("td",[t._v("DNS查询结束")])]),t._v(" "),n("tr",[n("td",[t._v("connectStart")]),t._v(" "),n("td",[t._v("TCP开始建立连接的时间,如果有本地的缓存或keep-alive等,则与fetchStart值相等")])]),t._v(" "),n("tr",[n("td",[t._v("secureConnectionStart")]),t._v(" "),n("td",[t._v("https 连接开始的时间,如果不是安全连接则为0")])]),t._v(" "),n("tr",[n("td",[t._v("connectEnd")]),t._v(" "),n("td",[t._v("TCP完成握手的时间，如果有本地的缓存或keep-alive等，则与 connectStart 值相等")])]),t._v(" "),n("tr",[n("td",[t._v("requestStart")]),t._v(" "),n("td",[t._v("HTTP请求读取真实文档开始的时间,包括从本地缓存读取")])]),t._v(" "),n("tr",[n("td",[t._v("requestStart")]),t._v(" "),n("td",[t._v("HTTP请求读取真实文档结束的时间,包括从本地缓存读取")])]),t._v(" "),n("tr",[n("td",[t._v("responseStart")]),t._v(" "),n("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取）第一个字节时的Unix毫秒时间戳")])]),t._v(" "),n("tr",[n("td",[t._v("responseEnd")]),t._v(" "),n("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取，或从本地资源读取）最后一个字节时的Unix毫秒时间戳")])]),t._v(" "),n("tr",[n("td",[t._v("domLoading")]),t._v(" "),n("td",[t._v("这是当前网⻚DOM结构开始解析时的时间戳，是整个过程的起始时间戳，浏览器即将开始解析第一批收到的 HTML 文档字节，此时document.readyState变成loading,并将抛出readyStateChange事件")])]),t._v(" "),n("tr",[n("td",[t._v("domInteractive")]),t._v(" "),n("td",[t._v("返回当前网⻚DOM结构结束解析、开始加载内嵌资源时时间戳,document.readyState 变成interactive，并将抛出readyStateChange事件(注意只是DOM树解析完成,这时候并没有开始加载网⻚内的资源)")])]),t._v(" "),n("tr",[n("td",[t._v("domContentLoadedEventStart")]),t._v(" "),n("td",[t._v("网⻚domContentLoaded事件发生的时间")])]),t._v(" "),n("tr",[n("td",[t._v("domContentLoadedEventEnd")]),t._v(" "),n("td",[t._v("网⻚domContentLoaded事件脚本执行完毕的时间,domReady的时间")])]),t._v(" "),n("tr",[n("td",[t._v("domComplete")]),t._v(" "),n("td",[t._v("DOM树解析完成,且资源也准备就绪的时间,document.readyState成complete.并将抛出readystatechange事件")])]),t._v(" "),n("tr",[n("td",[t._v("loadEventStart")]),t._v(" "),n("td",[t._v("load 事件发送给文档，也即load回调函数开始执行的时间")])]),t._v(" "),n("tr",[n("td",[t._v("loadEventEnd")]),t._v(" "),n("td",[t._v("onload回调函数结束")])]),t._v(" "),n("tr",[n("td",[t._v("domainLookupEnd - domainLookupStart")]),t._v(" "),n("td",[t._v("DNS查询时间")])]),t._v(" "),n("tr",[n("td",[t._v("connectEnd - connectStart")]),t._v(" "),n("td",[t._v("TCP连接时间")])]),t._v(" "),n("tr",[n("td",[t._v("responseEnd - requestStart")]),t._v(" "),n("td",[t._v("请求响应时间")])]),t._v(" "),n("tr",[n("td",[t._v("first-paint")]),t._v(" "),n("td",[t._v("首次绘制时间")])]),t._v(" "),n("tr",[n("td",[t._v("first-contentful-paint")]),t._v(" "),n("td",[t._v("首次有内容绘制时间")])]),t._v(" "),n("tr",[n("td",[t._v("first-screen-time")]),t._v(" "),n("td",[t._v("首屏时间")])]),t._v(" "),n("tr",[n("td",[t._v("FCP")]),t._v(" "),n("td",[t._v("模拟的首次有内容绘制时间")])]),t._v(" "),n("tr",[n("td",[t._v("loadEventStart - domContentLoadedEventEnd")]),t._v(" "),n("td",[t._v("外部资源加载时间")])])])]),t._v(" "),n("h2",{attrs:{id:"白屏时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#白屏时间"}},[t._v("#")]),t._v(" 白屏时间")]),t._v(" "),n("p",[t._v('指的是浏览器开始显示内容的时间，我们一般认为浏览器开始渲染"body" 开始标签或者解析完"head"标签的时刻就是页面白屏结束的时间点。将代码脚本放在 "head" 闭合标签前面就能获取白屏时间：')]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationStart\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h2",{attrs:{id:"首屏时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#首屏时间"}},[t._v("#")]),t._v(" 首屏时间")]),t._v(" "),n("p",[t._v("用户看到第一屏页面的时间。在window.onload事件中执行以下代码，可以获取首屏时间：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationStart\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"时间计算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#时间计算"}},[t._v("#")]),t._v(" 时间计算")]),t._v(" "),n("p",[t._v("以下给出统计页面性能指标的方法。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v("  times  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v("  t  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  优先使用  navigation  v2    https://www.w3.org/TR/navigation-timing-2/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v("  win"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PerformanceNavigationTiming  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'function'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v("  nt2Timing  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'navigation'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nt2Timing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nt2Timing\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//重定向时间")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirectTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirectEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirectStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//dns查询耗时")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dnsTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//TTFB 读取页面第一个字节的时间")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ttfbTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseStart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//DNS 缓存时间")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("appcacheTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domainLookupStart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//卸载页面的时间")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unloadTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unloadEventEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unloadEventStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//tcp连接耗时")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tcpTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connectStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//request请求耗时")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reqTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//解析dom树耗时")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("analysisTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domComplete "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domInteractive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//白屏时间")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blankTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domInteractive "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domLoading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//domReadyTime")]),t._v("\ntimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domReadyTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domContentLoadedEventEnd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchStart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br")])]),n("h1",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming",target:"_blank",rel:"noopener noreferrer"}},[t._v("PerformanceTiming"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/lhb25/p/how-browsers-work.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端文摘：深入解析浏览器的幕后工作原理"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/9ae38f297a5d",target:"_blank",rel:"noopener noreferrer"}},[t._v("「阿里 UC 团队」如何在10 分钟内，彻底搞懂前端页面性能监控？"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);